generator client {
  provider = "prisma-client-js"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                    String                  @id @default(cuid())
  name                  String?
  email                 String                  @unique
  emailVerified         DateTime?
  image                 String?
  createdAt             DateTime                @default(now())
  updatedAt             DateTime                @updatedAt
  accounts              Account[]
  conversations         ChatConversation[]
  sessions              Session[]
  travelExtractionQueue TravelExtractionQueue[]
  trips                 Trip[]
  TripPDF               TripPDF[]
  contacts              UserContact[]
  hobbies               UserHobby[]
  profile               UserProfile?
  profileGraph          UserProfileGraph?
  profileValues         UserProfileValue[]
  relatedTo             UserRelationship[]      @relation("RelatedToUser")
  relationships         UserRelationship[]      @relation("UserRelationships")
  travelPreferences     UserTravelPreference[]
}

model Account {
  id                 Int       @id @default(autoincrement())
  userId             String
  type               String
  provider           String
  providerAccountId  String
  refresh_token      String?
  access_token       String?
  expires_at         Int?
  token_type         String?
  scope              String?
  id_token           String?
  session_state      String?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
  canLogin           Boolean   @default(true)
  isPrimaryLogin     Boolean   @default(false)
  lastLoginAt        DateTime?
  syncStatus         String    @default("active")
  oauth_profile_data Json?
  user               User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
  @@index([userId, canLogin])
}

model Session {
  sessionToken String   @unique
  userId       String
  expires      DateTime
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  id           String   @id @default(cuid())
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String
  expires    DateTime

  @@id([identifier, token])
}

model Trip {
  id                  String             @id @default(cuid())
  title               String
  description         String
  imageUrl            String?
  startDate           DateTime
  endDate             DateTime
  userId              String
  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt
  imageIsCustom       Boolean            @default(false)
  imagePromptId       String?
  permissions         TripPermission     @default(PRIVATE)
  status              TripStatus         @default(DRAFT)
  imagePromptStyleId  String?
  descriptionIsCustom Boolean            @default(false)
  conversations       ChatConversation[]
  segments            Segment[]
  imagePrompt         ImagePrompt?       @relation(fields: [imagePromptId], references: [id])
  ImagePromptStyle    ImagePromptStyle?  @relation(fields: [imagePromptStyleId], references: [id])
  user                User               @relation(fields: [userId], references: [id])
  intelligence        TripIntelligence?
  TripPDF             TripPDF[]
  weatherCache        TripWeatherCache[]
}

model Segment {
  id                String             @id @default(cuid())
  startTitle        String
  startLat          Float?
  startLng          Float?
  endTitle          String
  endLat            Float?
  endLng            Float?
  notes             String?
  startTime         DateTime?
  endTime           DateTime?
  tripId            String
  order             Int                @default(0)
  createdAt         DateTime           @default(now())
  imageUrl          String?
  name              String
  segmentTypeId     String
  imageIsCustom     Boolean            @default(false)
  endTimeZoneId     String?
  endTimeZoneName   String?
  startTimeZoneId   String?
  startTimeZoneName String?
  wall_end_date     DateTime?          @db.Date
  wall_start_date   DateTime?          @db.Date
  conversations     ChatConversation[]
  reservations      Reservation[]
  segmentType       SegmentType        @relation(fields: [segmentTypeId], references: [id])
  trip              Trip               @relation(fields: [tripId], references: [id], onDelete: Cascade)
}

model SegmentType {
  id          String    @id @default(cuid())
  name        String    @unique
  createdAt   DateTime  @default(now())
  description String?
  segments    Segment[]
}

model ReservationCategory {
  id        String            @id @default(cuid())
  name      String            @unique
  createdAt DateTime          @default(now())
  types     ReservationType[]
}

model ReservationDisplayGroup {
  id          String            @id @default(cuid())
  name        String            @unique
  displayName String
  description String?
  createdAt   DateTime          @default(now())
  types       ReservationType[]
}

model ReservationType {
  id             String                   @id @default(cuid())
  name           String
  categoryId     String
  createdAt      DateTime                 @default(now())
  displayGroupId String?
  reservations   Reservation[]
  category       ReservationCategory      @relation(fields: [categoryId], references: [id])
  displayGroup   ReservationDisplayGroup? @relation(fields: [displayGroupId], references: [id])

  @@unique([categoryId, name])
}

model ReservationStatus {
  id           String        @id @default(cuid())
  name         String        @unique
  createdAt    DateTime      @default(now())
  reservations Reservation[]
}

model Reservation {
  id                  String             @id @default(cuid())
  name                String
  confirmationNumber  String?
  notes               String?
  reservationTypeId   String
  reservationStatusId String
  segmentId           String
  startTime           DateTime?
  endTime             DateTime?
  cost                Float?
  currency            String?
  location            String?
  url                 String?
  imageUrl            String?
  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt
  arrivalLocation     String?
  arrivalTimezone     String?
  departureLocation   String?
  departureTimezone   String?
  imageIsCustom       Boolean            @default(false)
  cancellationPolicy  String?
  contactEmail        String?
  contactPhone        String?
  latitude            Float?
  longitude           Float?
  timeZoneId          String?
  timeZoneName        String?
  vendor              String?
  metadata            Json?
  wall_end_date       DateTime?          @db.Date
  wall_end_time       DateTime?          @db.Time(6)
  wall_start_date     DateTime?          @db.Date
  wall_start_time     DateTime?          @db.Time(6)
  conversations       ChatConversation[]
  reservationStatus   ReservationStatus  @relation(fields: [reservationStatusId], references: [id])
  reservationType     ReservationType    @relation(fields: [reservationTypeId], references: [id])
  segment             Segment            @relation(fields: [segmentId], references: [id], onDelete: Cascade)
}

model ChatConversation {
  id            String        @id @default(cuid())
  userId        String
  title         String
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  tripId        String?
  chatType      ChatType      @default(TRIP)
  reservationId String?
  segmentId     String?
  reservation   Reservation?  @relation(fields: [reservationId], references: [id], onDelete: Cascade)
  segment       Segment?      @relation(fields: [segmentId], references: [id], onDelete: Cascade)
  trip          Trip?         @relation(fields: [tripId], references: [id], onDelete: Cascade)
  user          User          @relation(fields: [userId], references: [id], onDelete: Cascade)
  messages      ChatMessage[]
}

model ChatMessage {
  id             String           @id @default(cuid())
  conversationId String
  role           String
  content        String
  toolCalls      Json?
  createdAt      DateTime         @default(now())
  conversation   ChatConversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
}

model ImagePromptStyle {
  id          String        @id @default(cuid())
  name        String        @unique
  slug        String        @unique
  description String?
  isDefault   Boolean       @default(false)
  isActive    Boolean       @default(true)
  sortOrder   Int           @default(0)
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  prompts     ImagePrompt[]
  Trip        Trip[]

  @@index([isDefault])
  @@index([isActive, sortOrder])
}

model ImagePrompt {
  id        String            @id @default(cuid())
  name      String            @unique
  prompt    String
  category  String
  createdAt DateTime          @default(now())
  updatedAt DateTime          @updatedAt
  lightness String?
  isActive  Boolean           @default(true)
  sortOrder Int               @default(0)
  styleId   String?
  style     ImagePromptStyle? @relation(fields: [styleId], references: [id])
  trips     Trip[]

  @@unique([styleId, category])
  @@index([styleId, category])
  @@index([isActive])
}

model ImageQueue {
  id         String   @id @default(cuid())
  entityType String
  entityId   String
  prompt     String
  status     String   @default("waiting")
  notes      String?
  imageUrl   String?
  attempts   Int      @default(0)
  promptId   String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  logId      String?

  @@index([status, createdAt])
  @@index([entityType, entityId])
}

model ImageGenerationLog {
  id               String   @id @default(cuid())
  entityType       String
  entityId         String
  entityName       String?
  promptId         String?
  promptName       String?
  promptStyle      String?
  fullPrompt       String
  aiReasoning      String?
  selectionReason  String?
  availablePrompts String?
  callerFunction   String?
  callerSource     String?
  userId           String?
  status           String
  imageUrl         String?
  errorMessage     String?
  generationTimeMs Int?
  imageProvider    String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([entityType, entityId])
  @@index([promptId])
  @@index([status])
  @@index([createdAt])
}

model UserProfile {
  id                String    @id @default(cuid())
  userId            String    @unique
  dateOfBirth       DateTime?
  address           String?
  city              String?
  country           String?
  loyaltyPrograms   Json?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  firstName         String?
  lastName          String?
  homeAirports      Json?
  preferredAirports Json?
  user              User      @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model ContactType {
  id        String        @id @default(cuid())
  name      String        @unique
  label     String
  icon      String?
  isActive  Boolean       @default(true)
  sortOrder Int           @default(0)
  createdAt DateTime      @default(now())
  contacts  UserContact[]
}

model UserContact {
  id            String      @id @default(cuid())
  userId        String
  contactTypeId String
  value         String
  label         String?
  isPrimary     Boolean     @default(false)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  contactType   ContactType @relation(fields: [contactTypeId], references: [id])
  user          User        @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, contactTypeId])
}

model Hobby {
  id        String      @id @default(cuid())
  name      String      @unique
  category  String?
  icon      String?
  isActive  Boolean     @default(true)
  sortOrder Int         @default(0)
  createdAt DateTime    @default(now())
  users     UserHobby[]
}

model UserHobby {
  id        String   @id @default(cuid())
  userId    String
  hobbyId   String
  level     String?
  createdAt DateTime @default(now())
  hobby     Hobby    @relation(fields: [hobbyId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, hobbyId])
}

model TravelPreferenceType {
  id              String                   @id @default(cuid())
  name            String                   @unique
  label           String
  description     String?
  icon            String?
  sortOrder       Int                      @default(0)
  isActive        Boolean                  @default(true)
  isRequired      Boolean                  @default(false)
  createdAt       DateTime                 @default(now())
  updatedAt       DateTime                 @updatedAt
  options         TravelPreferenceOption[]
  userPreferences UserTravelPreference[]
}

model TravelPreferenceOption {
  id               String                 @id @default(cuid())
  preferenceTypeId String
  value            String
  label            String
  description      String?
  icon             String?
  sortOrder        Int                    @default(0)
  isActive         Boolean                @default(true)
  createdAt        DateTime               @default(now())
  preferenceType   TravelPreferenceType   @relation(fields: [preferenceTypeId], references: [id], onDelete: Cascade)
  userPreferences  UserTravelPreference[]

  @@unique([preferenceTypeId, value])
}

model UserTravelPreference {
  id               String                 @id @default(cuid())
  userId           String
  preferenceTypeId String
  optionId         String
  createdAt        DateTime               @default(now())
  updatedAt        DateTime               @updatedAt
  option           TravelPreferenceOption @relation(fields: [optionId], references: [id])
  preferenceType   TravelPreferenceType   @relation(fields: [preferenceTypeId], references: [id])
  user             User                   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, preferenceTypeId])
}

model UserRelationship {
  id               String   @id @default(cuid())
  userId           String
  relatedUserId    String
  relationshipType String
  nickname         String?
  notes            String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  relatedUser      User     @relation("RelatedToUser", fields: [relatedUserId], references: [id], onDelete: Cascade)
  user             User     @relation("UserRelationships", fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, relatedUserId])
}

model UserProfileGraph {
  id        String   @id @default(cuid())
  userId    String   @unique
  graphData String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model ProfileCategory {
  id          String            @id @default(cuid())
  name        String
  slug        String            @unique
  description String?
  icon        String?
  color       String?
  parentId    String?
  level       Int               @default(0)
  sortOrder   Int               @default(0)
  isActive    Boolean           @default(true)
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt
  parent      ProfileCategory?  @relation("CategoryHierarchy", fields: [parentId], references: [id])
  children    ProfileCategory[] @relation("CategoryHierarchy")
  values      ProfileValue[]

  @@index([parentId])
  @@index([level, sortOrder])
}

model ProfileValue {
  id          String             @id @default(cuid())
  value       String
  categoryId  String
  description String?
  icon        String?
  aliases     String[]
  createdAt   DateTime           @default(now())
  updatedAt   DateTime           @updatedAt
  category    ProfileCategory    @relation(fields: [categoryId], references: [id])
  userValues  UserProfileValue[]

  @@unique([value, categoryId])
  @@index([categoryId])
}

model UserProfileValue {
  id        String       @id @default(cuid())
  userId    String
  valueId   String
  metadata  Json?
  notes     String?
  addedAt   DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  user      User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  value     ProfileValue @relation(fields: [valueId], references: [id], onDelete: Cascade)

  @@unique([userId, valueId])
  @@index([userId])
  @@index([valueId])
}

model TravelExtractionQueue {
  id            String           @id @default(cuid())
  userId        String
  fileName      String
  fileType      String
  fileSize      Int
  fileUrl       String?
  textContent   String?
  status        ExtractionStatus @default(PENDING)
  progress      Int              @default(0)
  extractedData Json?
  errorMessage  String?
  tripId        String?
  createdAt     DateTime         @default(now())
  processedAt   DateTime?
  user          User             @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, status])
  @@index([createdAt])
}

model ExtractionFeedback {
  id               String   @id @default(cuid())
  emailText        String
  emailHash        String   @unique
  emailLength      Int
  aiTopType        String
  aiCategory       String
  aiConfidence     Float
  aiScore          Float
  aiScoring        Json
  aiAlternatives   Json
  userSelectedType String
  userCategory     String
  wasOverridden    Boolean
  userReason       String?
  userId           String?
  createdAt        DateTime @default(now())
  reviewed         Boolean  @default(false)
  incorporated     Boolean  @default(false)

  @@index([wasOverridden, reviewed])
  @@index([aiTopType, userSelectedType])
  @@index([createdAt])
}

model TripIntelligence {
  id                       String                 @id @default(cuid())
  tripId                   String                 @unique
  hasCurrencyAdvice        Boolean                @default(false)
  hasEmergencyInfo         Boolean                @default(false)
  hasCulturalCalendar      Boolean                @default(false)
  hasActivitySuggestions   Boolean                @default(false)
  hasDiningRecommendations Boolean                @default(false)
  hasPackingList           Boolean                @default(false)
  hasLanguageGuides        Boolean                @default(false)
  hasVisaRequirements      Boolean                @default(false)
  currencyGeneratedAt      DateTime?
  emergencyGeneratedAt     DateTime?
  culturalGeneratedAt      DateTime?
  activityGeneratedAt      DateTime?
  diningGeneratedAt        DateTime?
  packingGeneratedAt       DateTime?
  languageGeneratedAt      DateTime?
  visaGeneratedAt          DateTime?
  createdAt                DateTime               @default(now())
  updatedAt                DateTime               @updatedAt
  activitySuggestions      ActivitySuggestion[]
  culturalEvents           CulturalEvent[]
  currencyAdvice           CurrencyAdvice[]
  diningRecommendations    DiningRecommendation[]
  emergencyInfo            EmergencyInfo[]
  packingList              PackingList[]
  languageGuides           LanguageGuide[]
  visaRequirements         TripVisaRequirement[]
  trip                     Trip                   @relation(fields: [tripId], references: [id], onDelete: Cascade)

  @@index([tripId])
}

model CurrencyAdvice {
  id                 String           @id @default(cuid())
  intelligenceId     String
  destination        String
  currency           String
  exchangeRate       Float
  baseCurrency       String
  tippingCustom      String
  atmLocations       String
  cardAcceptance     String
  cashRecommendation String
  reasoning          String
  relevanceScore     Float
  profileReferences  Json
  createdAt          DateTime         @default(now())
  intelligence       TripIntelligence @relation(fields: [intelligenceId], references: [id], onDelete: Cascade)

  @@index([intelligenceId])
}

model EmergencyInfo {
  id                String           @id @default(cuid())
  intelligenceId    String
  destination       String
  country           String
  embassyName       String
  embassyAddress    String
  embassyPhone      String
  embassyEmail      String?
  emergencyNumbers  Json
  nearestHospitals  Json
  pharmacyInfo      String
  safetyLevel       String
  commonScams       String[]
  culturalSafety    String
  reasoning         String
  relevanceScore    Float
  profileReferences Json
  createdAt         DateTime         @default(now())
  intelligence      TripIntelligence @relation(fields: [intelligenceId], references: [id], onDelete: Cascade)

  @@index([intelligenceId])
}

model CulturalEvent {
  id                String           @id @default(cuid())
  intelligenceId    String
  destination       String
  eventName         String
  eventType         String
  date              DateTime
  description       String
  impact            String
  recommendation    String
  reasoning         String
  relevanceScore    Float
  profileReferences Json
  createdAt         DateTime         @default(now())
  intelligence      TripIntelligence @relation(fields: [intelligenceId], references: [id], onDelete: Cascade)

  @@index([intelligenceId])
  @@index([date])
}

model ActivitySuggestion {
  id                String           @id @default(cuid())
  intelligenceId    String
  segmentId         String?
  dayNumber         Int
  timeSlot          String
  gapStartTime      DateTime
  gapEndTime        DateTime
  gapDuration       Float
  activityName      String
  activityType      String
  location          String
  estimatedDuration Float
  estimatedCost     String
  viatorProductId   String?
  viatorUrl         String?
  viatorRating      Float?
  description       String
  whyRelevant       String
  reasoning         String
  relevanceScore    Float
  profileReferences Json
  createdAt         DateTime         @default(now())
  intelligence      TripIntelligence @relation(fields: [intelligenceId], references: [id], onDelete: Cascade)

  @@index([intelligenceId])
  @@index([dayNumber])
}

model DiningRecommendation {
  id                String           @id @default(cuid())
  intelligenceId    String
  segmentId         String?
  dayNumber         Int
  mealType          String
  restaurantName    String
  cuisineType       String
  priceRange        String
  location          String
  distance          String
  yelpId            String?
  yelpUrl           String?
  yelpRating        Float?
  yelpReviewCount   Int?
  description       String
  specialties       String[]
  dietaryMatch      String[]
  reasoning         String
  relevanceScore    Float
  profileReferences Json
  createdAt         DateTime         @default(now())
  intelligence      TripIntelligence @relation(fields: [intelligenceId], references: [id], onDelete: Cascade)

  @@index([intelligenceId])
  @@index([dayNumber])
}

model PackingList {
  id                String           @id @default(cuid())
  intelligenceId    String
  category          String
  itemName          String
  quantity          String
  reason            String
  priority          String
  weatherBased      Boolean          @default(false)
  profileBased      Boolean          @default(false)
  reasoning         String
  relevanceScore    Float
  profileReferences Json
  createdAt         DateTime         @default(now())
  intelligence      TripIntelligence @relation(fields: [intelligenceId], references: [id], onDelete: Cascade)

  @@index([intelligenceId])
  @@index([category])
  @@index([priority])
}

model TripWeatherCache {
  id          String   @id @default(cuid())
  tripId      String
  locationKey String   // e.g., "lat:lng" or segment identifier
  weatherData Json     // Store the full weather response
  fetchedAt   DateTime @default(now())
  expiresAt   DateTime // fetchedAt + 1 hour
  trip        Trip     @relation(fields: [tripId], references: [id], onDelete: Cascade)

  @@unique([tripId, locationKey])
  @@index([tripId])
  @@index([expiresAt])
}

model LanguageGuide {
  id                 String             @id @default(cuid())
  intelligenceId     String
  targetLanguage     String
  targetLanguageCode String
  userProficiency    String             // 'beginner' | 'intermediate' | 'advanced'
  destinations       String?
  createdAt          DateTime           @default(now())
  intelligence       TripIntelligence   @relation(fields: [intelligenceId], references: [id], onDelete: Cascade)
  scenarios          LanguageScenario[]

  @@index([intelligenceId])
}

model LanguageScenario {
  id             String           @id @default(cuid())
  guideId        String
  scenario       String
  relevanceScore Float
  reasoning      String
  createdAt      DateTime         @default(now())
  guide          LanguageGuide    @relation(fields: [guideId], references: [id], onDelete: Cascade)
  phrases        LanguagePhrase[]
  verbs          LanguageVerb[]

  @@index([guideId])
}

model LanguagePhrase {
  id           String           @id @default(cuid())
  scenarioId   String
  phrase       String
  translation  String
  romanization String?
  reasoning    String?
  createdAt    DateTime         @default(now())
  scenario     LanguageScenario @relation(fields: [scenarioId], references: [id], onDelete: Cascade)

  @@index([scenarioId])
}

model LanguageVerb {
  id          String           @id @default(cuid())
  scenarioId  String
  verb        String
  conjugation String
  usage       String
  createdAt   DateTime         @default(now())
  scenario    LanguageScenario @relation(fields: [scenarioId], references: [id], onDelete: Cascade)

  @@index([scenarioId])
}

model TripVisaRequirement {
  id                String           @id @default(cuid())
  intelligenceId    String
  destination       String
  country           String
  visaRequired      Boolean
  visaType          String?
  duration          String?
  advanceRegistration String?
  requirements      String[]
  processingTime    String?
  cost              String?
  sources           Json
  importantNotes    String?
  citizenship       String
  residence         String?
  createdAt         DateTime         @default(now())
  intelligence      TripIntelligence @relation(fields: [intelligenceId], references: [id], onDelete: Cascade)

  @@index([intelligenceId])
  @@index([citizenship])
}

model AirportTimezone {
  code        String   @id
  timeZoneId  String
  airportName String?
  latitude    Float?
  longitude   Float?
  createdAt   DateTime @default(now())
  updatedAt   DateTime

  @@index([timeZoneId])
}

model PerformanceLog {
  id                String   @id
  userId            String?
  sessionId         String?
  pathname          String
  serverRenderTime  Int?
  databaseQueryTime Int?
  externalApiTime   Int?
  totalLoadTime     Int?
  queryCount        Int?
  queryDetails      Json?
  ttfb              Float?
  fcp               Float?
  lcp               Float?
  cls               Float?
  fid               Float?
  inp               Float?
  userAgent         String?
  timestamp         DateTime @default(now())

  @@index([pathname])
  @@index([pathname, timestamp])
  @@index([timestamp])
  @@index([userId])
}

model TripPDF {
  id           String   @id @default(cuid())
  tripId       String
  templateId   String
  templateName String
  fileUrl      String
  fileKey      String
  generatedAt  DateTime @default(now())
  userId       String
  Trip         Trip     @relation(fields: [tripId], references: [id], onDelete: Cascade)
  User         User     @relation(fields: [userId], references: [id])

  @@index([tripId])
  @@index([userId])
}

enum TripStatus {
  DRAFT
  PLANNING
  LIVE
  ARCHIVED
}

enum TripPermission {
  PRIVATE
  FRIENDS
  LINK
  ANYONE
}

enum ChatType {
  TRIP
  SEGMENT
  RESERVATION
}

enum ExtractionStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
  REVIEWED
}
